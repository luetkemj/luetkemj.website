{"data":{"site":{"siteMetadata":{"title":"Gatsby Default Starter","description":"Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.","author":"@gatsbyjs"}},"markdownRemark":{"html":"<p>So this weekend I struggled to get redux working properly. Specifically I had trouble with getting my cardReducer to hold data. It kept coming back undefined even though it seemed like it should have worked per the code below.</p>\n<pre><code class=\"language-javascript\">import { combineReducers } from 'redux';\nimport { routerReducer as routing } from 'react-router-redux';\nimport { cardReducer } from './card.reducer';\n\nexport default combineReducers({\n  routing,\n  cardState: cardReducer,\n});\n</code></pre>\n<p>The problem lay in some es6 magic I didn't understand mixed with some simple fundamental javascript I was unfamiliar with.</p>\n<pre><code class=\"language-javascript\">import { cardReducer } from './card.reducer';\n</code></pre>\n<p>Keep in mind I'm still wrapping my head around this as I try to explain it.</p>\n<p>If we roll back to the start of my misunderstanding we find module.exports. In Node module.exports allows you to package up some functions and send them along for use in another file via require. SitePoint has a nice little article that explains it better than I can <a href=\"https://www.sitepoint.com/understanding-module-exports-exports-node-js/\">here</a>.</p>\n<p>Suppose I have a file called cardReducer.js. It's contents look like this:</p>\n<pre><code class=\"language-javascript\">cardReducer = module.exports = {}\n</code></pre>\n<p>If I want to require it in another file I can assign module.exports to a variable like so.</p>\n<pre><code class=\"language-javascript\">var cardReducer = require('./cardReducer');\n</code></pre>\n<p>I now have access to an empty object called cardReducer:</p>\n<pre><code class=\"language-javascript\">//cardReducer\n{}\n</code></pre>\n<p>I can add some functions to cardReducer.js and export them like so:</p>\n<pre><code class=\"language-javascript\">cardReducer = module.exports = {}\n\ncardReducer.foo = function(){\n  return 'foo';\n}\n\ncardReducer.bar = function(){\n  return 'bar';\n}\n</code></pre>\n<p>Now when I require cardReducer I get an object that looks like this:</p>\n<pre><code class=\"language-javascript\">{\n  foo: function(){\n    return 'foo';\n  },\n  bar: function(){\n    return 'bar';\n  }\n}\n</code></pre>\n<p>I can then just use them like this:</p>\n<pre><code class=\"language-javascript\">var cardReducer = require('./cardReducer');\n\nconsole.log(cardReducer.foo) // prints 'foo' to console\nconsole.log(cardReducer.bar) // prints 'bar' to console\n</code></pre>\n<p>With es6 we can write things a bit more succinctly.</p>\n<pre><code class=\"language-javascript\">cardReducer = module.exports = {}\n\ncardReducer.foo = function(){\n  return 'foo';\n}\n\ncardReducer.bar = function(){\n  return 'bar';\n}\n</code></pre>\n<p>Can become</p>\n<pre><code class=\"language-javascript\">export function foo(){\n  return 'foo';\n}\n\nexport function bar(){\n  return 'bar';\n}\n</code></pre>\n<p>This allows us to pick specific functions to import instead of just grabbing the whole thing like this:</p>\n<pre><code class=\"language-javascript\">import { foo } from 'cardReducer.js';\n</code></pre>\n<p>cardReducer still exports an object with two functions on it. We are simply grabbing just the one we want off of that object.</p>\n<p>We can use that function like this:</p>\n<pre><code class=\"language-javascript\">console.log(foo()); // prints 'foo' to the console\n</code></pre>\n<p>The problem with what I did originally is that in my file cardReducer.js I wrote this:</p>\n<pre><code class=\"language-javascript\">export default function cardReducer(state = initialState, action) {\n  switch (action.type) {\n    case CARD_CLICKED:\n      return Object.assign({}, state, {\n        name: 'I Was Here',\n      });\n    default:\n      return state;\n  }\n}\n</code></pre>\n<p>Right there at the top I <code>export default function...</code></p>\n<p>Now instead of adding functions to an object that I can pick and pull from I am instead replacing the object with my default function.</p>\n<p>So the export I get from ./card/reducer looked like this:</p>\n<pre><code class=\"language-javascript\">function cardReducer(state = initialState, action) {\n  switch (action.type) {\n    case CARD_CLICKED:\n      return Object.assign({}, state, {\n        name: 'I Was Here',\n      });\n    default:\n      return state;\n  }\n}\n</code></pre>\n<p>When I tried to import with this line:</p>\n<pre><code class=\"language-javascript\">import { cardReducer } from './card.reducer';\n</code></pre>\n<p>Javascript was expecting something like this:</p>\n<pre><code class=\"language-javascript\">{\n  cardReducer: function(state = initialState, action) {\n    switch (action.type) {\n      case CARD_CLICKED:\n        return Object.assign({}, state, {\n          name: 'I Was Here',\n        });\n      default:\n        return state;\n    }\n  },\n  anotherFunction: function(){\n    return 'something';\n  }\n}\n</code></pre>\n<p>I was telling javascript that it should look for an function called cardReducer <em>on</em> the exports coming from './card.reducer';</p>\n<p>The problem then is that the export coming from './card.reducer' <em>was</em> the function called cardReducer. When javascript couldn't find what it was looking for it just assigned undefined to cardReducer.</p>\n<p>So to fix the bug I simply needed to do this:</p>\n<pre><code class=\"language-javascript\">import cardReducer from './card.reducer';\n</code></pre>\n<p>Now instead of trying to import cardReducer on an object from './card.reducer' I am instead just importing cardReducer itself from './card.reducer';</p>\n<p>And this is why I need to take remedial JS course :P</p>","frontmatter":{"date":"160516","title":"module.exports","illustration":null}},"allFile":{"edges":[{"node":{"relativePath":"gatsby-icon.png","publicURL":"/static/gatsby-icon-4a9773549091c227cd2eb82ccd9c5e3a.png"}},{"node":{"relativePath":"gatsby-astronaut.png","publicURL":"/static/gatsby-astronaut-6d91c86c0fde632ba4cd01062fd9ccfa.png"}}]},"nextPost":{"edges":[{"node":{"path":"/160515/struggles"}}]},"nextPostMarkdown":{"frontmatter":{"title":"Struggles"}},"previousPost":{"edges":[{"node":{"path":"/160827/12000-feet"}}]},"previousPostMarkdown":{"frontmatter":{"title":"12,000 Feet"}}},"pageContext":{"nextPostPath":"/160515/struggles","previousPostPath":"/160827/12000-feet"}}